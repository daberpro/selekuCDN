var b=class{constructor(){}init(){}create(){}destroy(){}remove(){}};function m(e){let n=e?.match(/\{{.*?\}}/igm);n=[...new Set(n)];let t={};if(n instanceof Array&&n.length!==0){for(let r of n)t={...t,[r.replace(/\{{/igm,"").replace(/\}}/igm,"")]:r};return{binding:!0,value:t}}return{binding:!1,value:t}}function f(name,inner){!inner.hasOwnProperty("inner")&&inner instanceof Object&&(inner.inner="");let element=document.createElement(name),_inner=document.createTextNode(inner),copyValue=inner.inner;if(!(inner instanceof Object))element.appendChild(_inner);else{inner.hasOwnProperty("inherit:props")&&inner["inherit:props"]instanceof Object&&(inner.props={...inner.props,...inner["inherit:props"]}),inner.inner=inner.inner?.replace(/(\n|\t)/igm," ");let bind=m(inner.inner);for(let e in inner.props)bind.binding&&e in bind.value&&(copyValue=copyValue.replaceAll(bind.value[e],inner.props[e]));let evaluation="";for(let e in inner.props)try{inner.props[e]instanceof Object&&typeof inner.props[e]!="function"&&(evaluation+=`let ${e} = ${JSON.stringify(inner.props[e])};`),typeof inner.props[e]=="number"&&(evaluation+=`let ${e} = ${inner.props[e]};`),typeof inner.props[e]=="string"&&(evaluation+=`let ${e} = "${inner.props[e]}";`),typeof inner.props[e]=="function"&&(evaluation+=`let ${e} = ${inner.props[e]};`.replace(/(\n|\t)/igm," "))}catch(n){console.warn(n.message)}for(let x in bind.value)if(!(x in inner.props))try{copyValue=copyValue.replaceAll(bind.value[x],eval(`${evaluation} ${x}`))}catch(e){console.warn(e.message)}if(_inner=document.createTextNode(copyValue),element.appendChild(_inner),inner.hasOwnProperty("event")&&inner.event instanceof Object)for(let e in inner.event)element[e]=inner.event[e];if(inner.hasOwnProperty("attribute"))for(let e in inner.attribute){let n=m(inner.attribute[e]);if(n.binding)for(let t in n.value)inner.props.hasOwnProperty(t)?element.setAttribute(e,inner.attribute[e].replaceAll(n.value[t],inner.props[t])):(console.warn(t+" props not found!!"),element.setAttribute(e,void 0));else element.setAttribute(e,inner.attribute[e])}}let children=inner.children||[],content=typeof inner=="string"?inner:inner.inner;return{name,_inner,element,content,event:inner.event||{},children,"inherit:props":inner["inherit:props"]||{},attribute:inner.attribute||{},"@id":(()=>{try{return eval(inner["@id"])||null}catch(e){return inner["@id"]}})(),type:"ChildComponent",props:inner.props||{},update(callback=()=>{}){inner.hasOwnProperty("inherit:props")&&inner["inherit:props"]instanceof Object&&(inner.props={...inner.props,...inner["inherit:props"]});let _inner=document.createTextNode(inner);if(inner.hasOwnProperty("attribute"))for(let e in inner.attribute){let n=m(inner.attribute[e]);if(n.binding)for(let t in n.value)inner.props.hasOwnProperty(t)?element.setAttribute(e,inner.attribute[e].replaceAll(n.value[t],inner.props[t])):(console.warn(t+" props not found!!"),element.setAttribute(e,void 0));else element.setAttribute(e,inner.attribute[e])}if(this.hasOwnProperty("event")&&this.event instanceof Object)for(let e in this.event)this.element[e]=this.event[e];if(inner instanceof Object){inner.inner=inner.inner.replace(/(\n|\t)/igm," ");let bind=m(inner.inner),copyValue=inner.inner;for(let e in this.props)bind.binding&&e in bind.value&&(copyValue=copyValue.replaceAll(bind.value[e],this.props[e]));let evaluation="";for(let e in this.props)try{this.props[e]instanceof Object&&typeof this.props[e]!="function"&&(evaluation+=`let ${e} = ${JSON.stringify(this.props[e])};`),typeof this.props[e]=="number"&&(evaluation+=`let ${e} = ${this.props[e]};`),typeof this.props[e]=="string"&&(evaluation+=`let ${e} = "${this.props[e]}";`),typeof this.props[e]=="function"&&(evaluation+=`let ${e} = ${this.props[e]};`.replace(/(\n|\t)/igm," "))}catch(n){console.warn(n.message)}for(let x in bind.value)if(!(x in this.props))try{copyValue=copyValue.replaceAll(bind.value[x],eval(`${evaluation} ${x}`))}catch(e){console.warn(e.message)}this._inner.replaceData(0,this._inner.length,copyValue)}return callback(this)}}}function y(e,n){if(n.appendChild(e.element),e.children.length>0)for(let t of e.children)y(t,e.element)}function l(e){let n=Object.keys(e).map(r=>e[r]instanceof Array?`${r}:[${e[r].map(o=>typeof o=="string"?`"${o}"`:o)}]`:e[r]instanceof Object&&typeof e[r]!="function"?`${r}:${l(e[r])}`:typeof e[r]=="number"?`${r}:${e[r]}`:`${r}:"${e[r]}"`),t="{";for(let r in n)parseInt(r)===n.length-1?t+=n[r]+"}":t+=n[r]+",";return t==="{"?"{}":t}function u(e,n={}){let t=[];if(e.children.length>0)for(let o of e.children)t.push(u(o,n));let r="";return e.hasOwnProperty("attribute")||(e.attribute={}),e.type==="ChildComponent"&&(r=`

			createElement("${e.name}",{
				"@id": "${e["@id"]||null}",
				inner: "${e.content}",
				children: [${t}],
				attribute: ${l(e.attribute)},
				"inherit:props": ${l(e["inherit:props"]||{})},
				props: ${l({...e.props,...n})}
			})

		`),e.type==="conditionComponent"&&(r=`

			conditionalComponent("${e.name}",{
				"@id": "${e["@id"]||null}",
				inner: "${e.content}",
				children: [${t}],
				attribute: ${l(e.attribute)},
				props: ${l({...e.props,...n})},
				"inherit:props": ${l(e["inherit:props"]||{})},
				condition: "${e.condition}"
			})

		`),e.type==="LoopComponent"&&(r=`

			loopComponent("${e.name}",{
				"@id": "${e["@id"]||null}",
				inner: "${e.content}",
				child: ${u(e.child)},
				attribute: ${l(e.attribute)},
				props: ${l({...e.props,...n})},
				"inherit:props": ${l(e["inherit:props"]||{})},
				loop: "${e.loop}"
			})

		`),r}function C(child,props){props!=null&&(child.props=props),child.props.hasOwnProperty("@id")&&(child["@id"]=child.props["@id"],delete child.props["@id"]),child.props.hasOwnProperty("inherit:props")&&(child["inherit:props"]=child.props["inherit:props"],delete child.props["inherit:props"]);try{return eval(u(child,props))}catch(e){console.warn(e.message)}}function w(name,inner){let parentElement=f(name,inner),token=inner.loop.split(" ");if(token[2]in inner.props){inner.props[token[2]]instanceof Array||(inner.props[token[2]]=[]);try{let allChildren=[];for(let e of inner.child.children)allChildren.push(u(e));inner.child.type!=="conditionComponent"?eval(`for(let ${token[0]} ${token[1]} inner["props"]["${token[2]}"]){

				parentElement["children"].push(createElement(inner["child"].name,{
					inner: inner["child"].content,
					props: {
						...inner["props"],
						${token[0]}
					},
					attribute: ${l(inner.child.attribute)},
					"@id": inner["child"]["@id"],
					event: inner["child"]["event"],
					"inherit:props": inner["child"]["inherit:props"] || {},
					children: [${allChildren.join()}]
				}));

			}`):eval(`for(let ${token[0]} ${token[1]} inner["props"]["${token[2]}"]){

				parentElement["children"].push(conditionalComponent(inner["child"].name,{
					inner: inner["child"].content,
					props: {
						...inner["props"],
						${token[0]}
					},
					attribute: ${l(inner.child.attribute)},
					"@id": inner["child"]["@id"],
					event: inner["child"]["event"],
					"inherit:props": inner["child"]["inherit:props"] || {},
					children: [${allChildren.join()}]
				}));

			}`)}catch(e){console.warn(e.message)}}return{...parentElement,child:inner.child,loop:inner.loop,props:parentElement.props,type:"LoopComponent",update(callback=()=>{}){parentElement.update();let allElement=[];for(let e of this.children)e.element.remove();if(this.children=[],token[2]in this.props)try{let allChildren=[],props=this.child.props,condition=this.child.condition;for(let e of this.child.children)allChildren.push(u(e));inner.child.type!=="conditionComponent"?eval(`for(let ${token[0]} ${token[1]} this["props"]["${token[2]}"]){

								this.children.push(createElement(inner["child"].name,{
									inner: inner["child"].content,
									props: {
										...${l(props)},
										${token[0]}
									},
									attribute: ${l(inner.child.attribute)},
									"@id": inner["child"]["@id"],
									event: inner["child"]["event"],
									"inherit:props": inner["child"]["inherit:props"] || {},
									children: [${allChildren.join()}]
								}));

							}`):eval(`for(let ${token[0]} ${token[1]} this["props"]["${token[2]}"]){

								this.children.push(conditionalComponent(inner["child"].name,{
									inner: inner["child"].content,
									props: {
										...${l(props)},
										${token[0]}
									},
									attribute: ${l(inner.child.attribute)},
									"@id": inner["child"]["@id"],
									condition: "${condition}",
									event: inner["child"]["event"],
									"inherit:props": inner["child"]["inherit:props"] || {},
									children: [${allChildren.join()}]
								}));

							}`)}catch(e){console.warn(e.message)}for(let e of this.children)y(e,parentElement.element);return callback(this)}}}function d(e){if(e.element.remove(),e.children.length>0)for(let n of e.children)d(n)}function g(name,inner){let parentElement=f(name,inner);if(inner.props[inner.condition]!==null&&eval(inner.props[inner.condition]))for(let e of parentElement.children)y(e,parentElement.element);else for(let e of parentElement.children)d(e);return{...parentElement,type:"conditionComponent",condition:inner.condition,update(e=()=>{}){if(parentElement.update(),this.props[this.condition])for(let n of parentElement.children)y(n,parentElement.element);else for(let n of parentElement.children)d(n);return e(this)}}}var h=class{constructor(n,t={}){this.object=n,this.fragment=t}create({eventSetter:n,eventGetter:t}){let r=this.fragment,o=this.object;return new Proxy(this.object,{set(i,p,s,$,P){return n([i,p,s,$,r]),!0},get(i,p,s,$){return t([i,p,s,$,r])}})}};function c(e,n,t,r){if(e.props[n]!==void 0&&(e.props[n]=t),e.hasOwnProperty("inherit:props")&&e["inherit:props"]!==null&&Object.keys(e["inherit:props"]).length>0){let o={};Object.keys(e["inherit:props"]).filter(i=>r?.props?.hasOwnProperty(i)).map(i=>o={...o,[i]:r?.props?.[i]}),e["inherit:props"]={...e["inherit:props"],...o},e.props={...e.props,...o}}if(e.hasOwnProperty("child")&&e.child.children.length===0&&e.child.hasOwnProperty("inherit:props")&&e.child["inherit:props"]!==null&&Object.keys(e.child["inherit:props"]).length>0){let o={},i={};Object.keys(e.child["inherit:props"]).filter(p=>e?.props?.hasOwnProperty(p)).map(p=>o={...o,[p]:e?.props?.[p]}),Object.keys(e["inherit:props"]).filter(p=>r?.props?.hasOwnProperty(p)).map(p=>i={...i,[p]:r?.props?.[p]}),e.props={...e.props,...i},e["inherit:props"]={...e["inherit:props"],...o},e.child["inherit:props"]={...e.child["inherit:props"],...o},e.child.props={...e.props,...o}}if(e.children.length>0)for(let o of e.children)c(o,n,t,e);if(e.hasOwnProperty("child")&&e.child.children.length>0)for(let o of e.child.children){let i={},p={};Object.keys(e.child["inherit:props"]).filter(s=>e?.props?.hasOwnProperty(s)).map(s=>i={...i,[s]:e?.props?.[s]}),Object.keys(e["inherit:props"]).filter(s=>r?.props?.hasOwnProperty(s)).map(s=>p={...p,[s]:r?.props?.[s]}),e.props={...e.props,...p},e["inherit:props"]={...e["inherit:props"],...i},e.child["inherit:props"]={...e.child["inherit:props"],...i},e.child.props={...e.props,...i},c(o,n,t,e)}v(e)}var a={};function k(e){if(e.hasOwnProperty("@id")&&e["@id"]!==null&&a.hasOwnProperty(e["@id"])?a[e["@id"]].push(e):e.hasOwnProperty("@id")&&e["@id"]!==null&&(a[e["@id"]]=[],a[e["@id"]].push(e)),e.children.length>0)for(let n of e.children)k(n)}function O(e,n){if(n={...e.props},e.children.length>0)for(let t of e.children)n=Object.assign(n,O(t,n));return n}function L(e){let n={};if(e in a)for(let t of a[e])n={...n,...t.props,...O(t)};else console.warn(`@id "${e}" is unknown `);return{state:new h(n).create({eventSetter(t){if(e in a)for(let r of a[e])c(r,t[1],t[2]);else console.warn(`@id "${e}" is unknown `)},eventGetter(t){}}),event:new h(n).create({eventSetter(t){if(e in a)for(let r of a[e])r.event.hasOwnProperty(t[1])?(r.event[t[1]]=()=>t[2](r),v(r)):console.log(`event ${t[1]} not defined for component`);else console.warn(`@id "${e}" is unknown `)},eventGetter(t){}})}}function v(e){if(e.update(),e.children.length>0)for(let n of e.children)v(n)}var j=class extends b{constructor(){super();this.fragment={},this.context={},this.state={}}create(n,t){this.fragment={...this.fragment,...f(n,t),type:"ParentComponent"},this.context={...this.context,...this.fragment.props};let r=this.fragment;return this.state=new h(this.context).create({eventSetter(o){o[0].hasOwnProperty(o[1])?c(r,o[1],o[2]):console.warn("props not found!")},eventGetter(o){return o[0][o[1]]}}),{fragment:r,type:"ParentComponent"}}createChild(n,t,r=!1){let o=f(n,t);r&&(this.fragment={...this.fragment,...o,type:"ChildComponent"}),this.context={...this.context,...o.props};let i=this.fragment;return this.state=new h(this.context).create({eventSetter(p){p[0].hasOwnProperty(p[1])?c(i,p[1],p[2]):console.warn("props not found!")},eventGetter(p){return p[0][p[1]]}}),{...o,type:"ChildComponent"}}createLoop(n,t){let r=w(n,t,this.rootElement);this.context={...this.context,...r.props};let o=this.fragment;return this.state=new h(this.context).create({eventSetter(i){i[0].hasOwnProperty(i[1])?c(o,i[1],i[2]):console.warn("props not found!")},eventGetter(i){return i[0][i[1]]}}),{...r,type:"LoopComponent"}}importComponent(n,t){let r=C(n.fragment,t);this.context={...this.context,...n.context};let o=this.fragment;return this.state=new h(this.context).create({eventSetter(i){i[0].hasOwnProperty(i[1])?c(o,i[1],i[2]):console.warn("props not found!")},eventGetter(i){return i[0][i[1]]}}),{...r,type:"ChildComponent"}}createCondition(n,t){let r=g(n,t);this.context={...this.context,...r.props};let o=this.fragment;return this.state=new h(this.context).create({eventSetter(i){i[0].hasOwnProperty(i[1])?c(o,i[1],i[2]):console.warn("props not found!")},eventGetter(i){return i[0][i[1]]}}),{...r,type:"conditionComponent"}}rootElement(n,t){if(n.type==="conditionComponent"?(t.appendChild(n.element),n.update()):t.appendChild(n.element),n.children.length>0)for(let r of n.children)this?.rootElement(r,n.element)}render(n,t=()=>{}){t();for(let r of this.fragment.children)this.rootElement(r,this.fragment.element);n.appendChild(this.fragment.element)}destroy(n=()=>{}){n(),d(this.fragment)}};function N(e){if(document.head.querySelector("style")instanceof HTMLStyleElement)document.head.querySelector("style").textContent+=document.head.querySelector("style").textContent.replace(/(\n|\t|\r)/igm,"")+e.replace(/(\n|\t|\r)/igm,"");else{let n=document.createElement("style");n.textContent=e.replace(/(\n|\t|\r)/igm,""),document.head.appendChild(n)}};
